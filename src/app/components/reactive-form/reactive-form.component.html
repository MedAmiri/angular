<header>
    <h2>Formulaire Reactif</h2>
</header>

<section>
    <h3>Inscription</h3>

    <p>Value {{ form.value | json }} </p>
    <p>Status {{ form.status | json }} </p>

    <form [formGroup]="form">
        <div class="form-group row">
            <label class="col-2 col-form-label">Email: </label>
            <div class="col-10">
                <input type="text" class="form-control" placeholder="Email"
                       name="email" [formControl]="email"
                       [ngClass]="{'is-invalid': form.get('email').touched && (
                    form.get('email').hasError('required') || form.get('email').hasError('pattern')
                )}" />

                <p class="invalid-feedback" *ngIf="form.get('email').hasError('required')">
                    Le nom est obligatoire
                </p>
                <p class="invalid-feedback" *ngIf="form.get('email').hasError('pattern')">
                    Email non valide
                </p>
            </div>
        </div>
        <div class="form-group row">
            <label class="col-2 col-form-label">Password: </label>
            <div class="col-10">
                <input type="password" class="form-control" placeholder="Password"
                       name="password" [formControl]="password"
                       [ngClass]="{'is-invalid': form.get('password').touched && (
                    form.get('password').hasError('required') || form.get('password').hasError('minlength')
                    || form.get('password').hasError('firstUppercase')
                )}"/>

                <p class="invalid-feedback" *ngIf="form.get('password').hasError('required')">
                    Le mot de passe est obligatoire
                </p>
                <p class="invalid-feedback" *ngIf="form.get('password').hasError('minlength')">
                    Le mot de passe doit contenir 8 caractères
                </p>
                <p class="invalid-feedback" *ngIf="form.get('password').hasError('firstUppercase')">
                    Le mot de passe doit commencer par une majuscule
                </p>
            </div>
        </div>
        <div class="form-group row">
            <label class="col-2 col-form-label">Confirm Password: </label>
            <div class="col-10">
                <input type="password" class="form-control" placeholder="Confirm Password"
                       name="confirm" [formControl]="confirm"
                       [ngClass]="{'is-invalid': form.get('confirm').touched && (
                    form.get('confirm').hasError('required') || form.get('confirm').hasError('minlength')
                    || form.get('confirm').hasError('confirmPassword')
                )}" />

                <p class="invalid-feedback" *ngIf="form.get('confirm').hasError('required')">
                    La confirmation est obligatoire
                </p>
                <p class="invalid-feedback" *ngIf="form.get('confirm').hasError('minlength')">
                    La confirmation doit contenir 8 caractères
                </p>
                <p class="invalid-feedback" *ngIf="form.get('confirm').hasError('confirmPassword')">
                    La confirmation et le mot de passe sont differents
                </p>
            </div>
        </div>
        <div class="form-group row">
            <label class="col-2 col-form-label">Gender: </label>
            <div class="col-10">
                <select name="gender" class="form-control" [formControl]="gender"
                        [ngClass]="{'is-invalid': form.get('gender').touched && form.get('gender').hasError('required')}" >
                    <option *ngFor="let g of genderList" [value]="g">{{ g }}</option>
                </select>

                <p class="invalid-feedback" *ngIf="form.get('gender').hasError('required')">
                    Le genre est obligatoire
                </p>
            </div>
        </div>
        <div class="form-group row">
            <div class="col-10 offset-2">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="CGV" [formControl]="term" [ngClass]="{'is-invalid': form.get('term').touched && form.get('term').hasError('requiredTrue')}" />
                    <label class="form-check-label" for="CGV">
                        Confirm that you've read the Terms and Conditions
                    </label>
                    <p class="invalid-feedback" *ngIf="form.get('term').hasError('requiredTrue')">
                        Confirmer les CGV
                    </p>
                </div>
            </div>
        </div>
        <div class="form-group row">
            <div class="col-10 offset-2">
                <input type="submit" class="btn btn-primary" name="submit"
                       value="Sign Up" [disabled]="form.invalid" />
            </div>
        </div>
    </form>

</section>


